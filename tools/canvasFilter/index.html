<!DOCTYPE html>
<html>
<head>
  <title>CanvasFilter|Beta</title>
</head>
<body>
	<input type="file" id="fileInput" accept="image/*">
	<canvas id="original"></canvas>
	<canvas id="filter"></canvas>
	<br>
	<br>
	<input type='button' id='applyGrayScale' value='applyGrayScale'/>
	<input type='button' id='applySepiaFilter' value='applySepiaFilter'/>
	<input type='button' id='applyNegativeFilter' value='applyNegativeFilter'/>
	<input type='button' id='applyBlurFilter' value='applyBlurFilter'/>
	<input type='button' id='applySharpenFilter' value='applySharpenFilter'/>
	<input type='button' id='applyFilter2' value='applyFilter2'/>
	<script src='/rsrc/js/autoload.js'></script>
	<script>
		setTimeout(function(){
			$(document).ready(function(){
				
				const fileInput=document.getElementById("fileInput");
				const originalCanvas=document.getElementById("original");
				const filterCanvas=document.getElementById("filter");
				const originalCtx = originalCanvas.getContext("2d");
				const filterCtx = filterCanvas.getContext("2d");
				
				fileInput.addEventListener("change",function(e){
					helper.handleFileSelect().then(function(r){
						originalCtx.clearRect(0, 0, r.canvas.width, r.canvas.height);
						filterCtx.clearRect(0, 0, r.canvas.width, r.canvas.height);
						const img = new Image();
						img.src = r.img.src;
						img.onload = function(){
							originalCtx.drawImage(img, 0, 0, originalCanvas.width, originalCanvas.height);
							filterCtx.drawImage(img, 0, 0, originalCanvas.width, originalCanvas.height);
						};
						const filter=new Filter({"canvas":filterCanvas});
						const btnApplyFilterGrayScale=document.getElementById("applyGrayScale");
						const btnApplySepiaFilter=document.getElementById("applySepiaFilter");
						const btnApplyNegativeFilter=document.getElementById("applyNegativeFilter");
						const btnApplyBlurFilter=document.getElementById("applyBlurFilter");
						const btnApplySharpenFilter=document.getElementById("applySharpenFilter");
						const btnApplyFilter2=document.getElementById("applyFilter2");
						
						btnApplyFilterGrayScale.addEventListener("click",function(){
							console.log(filter.applyGrayScaleFilter());
						});
						btnApplySepiaFilter.addEventListener("click",function(){
							console.log(filter.applySepiaFilter());
						});
						btnApplyNegativeFilter.addEventListener("click",function(){
							console.log(filter.applyNegativeFilter());
						});
						btnApplyBlurFilter.addEventListener("click",function(){
							console.log(filter.applyBlurFilter());
						});
						btnApplySharpenFilter.addEventListener("click",function(){
							console.log(filter.applySharpenFilter());
						});
						btnApplyFilter2.addEventListener("click",function(){
							console.log(filter.applyFilter2());
						});
					});
				},false);
			});
		},2000);
	</script>
</body>
</html>
